function GetGamInfo(){var t=window.location.pathname,n=t.substring(t.lastIndexOf("/")+1);return n=n.replace("2","").toLowerCase(),ClsAccount.AccountInfo==null&&window.open(LoginPage+"&ReturnPage="+n,"_self"),n+"-"+ClsAccount.AccountInfo.NidAccount.split("-")[0]+"-"+sessionStorage.tabID+"-ID"+getParameterByName("ID")}function GoLoginPage(n){StartBusy("MainBody"," ");var t="";n!=undefined&&(t="&ReturnPage="+n);typeof EnableSSO!="undefined"&&EnableSSO=="Authin"?window.location.assign(".?LoginMode=StartSSO"+t):typeof EnableSSO!="undefined"&&EnableSSO=="SSOIsfahan"?window.location.assign(LoginPage+t+"&LoginMode=SSOIsfahan"):window.location.assign(LoginPage+t)}function GoLoginPageSSO(n){StartBusy("MainBody"," ");var t="";n!=undefined&&(t="&ReturnPage="+n);typeof EnableSSO!="undefined"&&EnableSSO.startsWith("SSO")&&(url=".",window.location.href.indexOf("SSO")==-1&&(url=window.location.href),url+="?LoginMode="+EnableSSO+t,window.location.assign(url))}function Logout(){if(LoginPage.indexOf("SafaLoginNew")>-1)window.open("logout.aspx","_blank","width=5, height=5");else{var n=getBaseUrl();$("#UMenu2_LblAccount").remove();typeof EnableSSO!="undefined"&&EnableSSO!=""?window.open(n+"default.aspx?Page=Logout"+EnableSSO,"_self"):window.open(n+"default.aspx?Page=Logout","_self")}}function LogoutSSOGov(){if(typeof EnableSSO!="undefined"&&EnableSSO=="SSOGov"){var n=getBaseUrl();window.open(n+"default.aspx?Page=Logout"+EnableSSO,"_self")}}function GoEditAccount(n){StartBusy("MainBody"," ");var t=ClsAccount.AccountInfo.NidAccount;t=t+n;t=window.btoa(t);window.location.assign(LoginPage+"&EditAccount=true")}function GoChangePass(){StartBusy("MainBody"," ");var n=ClsAccount.AccountInfo.NidAccountEnc;window.location.assign(LoginPage+"&ChangePassword="+n)}function navbarScrolldn(){$("#navbarScroll").hide();var n=setInterval(function(){var r=$("#navbar").height(),t=$(".navbar").height(),i=$(window).height();t>i?$("#navbarScroll").fadeIn():$("#navbarScroll").fadeOut();clearInterval(n)},2e3)}function DecryptXml(n,t){$.ajax({type:"POST",url:"USHowFishj.aspx/"+n,dataType:"json",contentType:"application/json; charset=utf-8",success:function(n){var r=n.d,i;let u=shiftBytes(r,0);i=$(u);t(i)},error:function(n){console.log("LoadObj "+n)}})}function shiftBytes(n,t){let r=n.match(/.{1,2}/g)||[],i=new Uint8Array(r.map(n=>parseInt(n,16)));for(let n=0;n<i.length;n++)i[n]=i[n]>>t;return(new TextDecoder).decode(i)}var NewRequest=function(){var i=GetGamInfo(),n,t;localStorage.removeItem(i);n=getParameterByName("ID");t=n!=""?"ID="+n:"";window.open("?"+t,"_self")},tabID=sessionStorage.tabID&&sessionStorage.closedLastTab!=="2"?sessionStorage.tabID:(sessionStorage.tabID=Math.floor(1e3+Math.random()*9e3),sessionStorage.Login=!0);sessionStorage.closedLastTab="2";$(window).on("unload beforeunload",function(){sessionStorage.closedLastTab="1"});logingMenu==!0?$("#logingMenu").css("display","block"):$("#logingMenu").css("display","none");$(document).ready(function(){function e(){if(window.location.href.indexOf("Config/Pages")>-1){var n=window.location.href.match(/^.*\//)[0];return n.replace("Config/Pages/","")}return""}function s(t){var s,f,o;$(t).find("MenuItem").each(function(){var f=ClsAccount.IsLogin,h=$(t).find("MenuItem[Caption='"+$(this).attr("Caption")+"']").find("Item[IsShow='true']").length,s,u;if($(this).children().length){var o=[],c=n($(this).attr("ShowAfterLogin")),l=$(this).attr("Target"),a=n($(this).attr("IsShow"));i.push({ID:$(this).attr("ID"),Caption:$(this).attr("Caption"),Url:$(this).attr("Url"),IsShow:a,ImagePath:r(this),SubMenu:o,Col:"Col"+($(this).attr("Col")!=undefined?$(this).attr("Col"):h>15?2:0),IsLogin:f,ShowAfterLogin:c,ShowInMainPage:$(this).attr("ShowInMainPage"),Target:l,Enable:$(this).attr("Enable")});$(this).children().each(function(t,i){var f=n($(this).attr("ShowAfterLogin")),e=$(this).attr("Target"),u=[];o.push({ID:$(this).attr("ID"),Caption:$(this).attr("Caption"),Url:$(this).attr("Url"),IsShow:n($(this).attr("IsShow")),ImagePath:r(this),ShowAfterLogin:f,ShowInMainPage:n($(this).attr("ShowInMainPage")),Target:e,Enable:$(this).attr("Enable"),SubMenu2:u,GamState:$(this).attr("GamState"),NidWorkflowDeff:$(this).attr("NidWorkflowDeff"),Archive_NidEntity:$(this).attr("Archive_NidEntity")});$(i).children().each(function(){var t,i,f;n($(this).attr("IsShow"))==!0?(t=n($(this).attr("ShowAfterLogin")),i=$(this).attr("Target"),u.push({ID:$(this).attr("ID"),Caption:$(this).attr("Caption"),Url:$(this).attr("Url"),IsShow:n($(this).attr("IsShow")),ImagePath:r(this),ShowAfterLogin:t,ShowInMainPage:n($(this).attr("ShowInMainPage")),Target:i,Enable:$(this).attr("Enable"),GamState:$(this).attr("GamState"),NidWorkflowDeff:$(this).attr("NidWorkflowDeff"),Archive_NidEntity:$(this).attr("Archive_NidEntity")})):(f=$(this).attr("ID"),$("#"+f).hide())})})}else s=n($(this).attr("SendNidAccount")),u="",s==!0&&ClsAccount.AccountInfo!=null&&(u="NidAccount="+ClsAccount.AccountInfo.NidAccount+"&AccountName="+ClsAccount.AccountInfo.AccountName,u="?p="+window.btoa(u)),i.push({ID:$(this).attr("ID"),Caption:$(this).attr("Caption"),Url:e()+$(this).attr("Url")+u,IsShow:n($(this).attr("IsShow")),ImagePath:r(this),IsLogin:f,ShowAfterLogin:n($(this).attr("ShowAfterLogin")),ShowInMainPage:n($(this).attr("ShowInMainPage")),Target:$(this).attr("Target"),Enable:$(this).attr("Enable")})});u().Menu=i;u().$apply();try{if(s=getParameterByName("ID"),f=Enumerable.From(u().Menu[1].SubMenu).Where(function(n){return n.ID==s}).FirstOrDefault(),f!=undefined&&(ClsMenu.ID=s,ClsMenu.CurrentTitle=f.Caption,ClsMenu.NidWorkflowDeff=f.NidWorkflowDeff,ClsMenu.Archive_NidEntity=f.Archive_NidEntity,u().Header=f.Caption,o=f.GamState,o!=""&&o!=null&&o!=undefined))try{GamsArray=eval(o)}catch{}GetScope()!=undefined&&(GetScope().GamsArray=GamsArray,GetScope().$apply(),GamPlugin.init())}catch(h){}}function r(n){var t=$(n).attr("ImagePath");return(t==undefined||t=="")&&(t="images/space.png"),t}function u(){return angular.element(document.getElementById("MainMenu")).scope()}var t,f,i,o,n;IsShowLoginPageAdmin==!0&&($("#btnLoginAdmin").show(),$("#btnLoginAdmin2").show(),$("#btnLoginAdminInMenuT").show());$("#btnLoginAdmin").attr("href",LoginPageAdmin);$("#btnLoginAdmin2").attr("href",LoginPageAdmin);t=getCookie("NavbarHelp");t!=""?$(".icon-bar").removeClass("shadow-pulse"):(t!=""&&t!=null,$("#NavbarHelp").fadeIn(2e3),f=setInterval(function(){clearInterval(f);$("#NavbarHelp").fadeOut(500);$(".icon-bar").removeClass("shadow-pulse");setCookie("NavbarHelp",1,365)},15e3));$("#navbar").on("click",function(){navbarScrolldn()});$(".navbar-toggle").on("click",function(){navbarScrolldn()});$("#navbarScroll").on("click",function(){$("html, body").animate({scrollTop:$("#navbar")[0].scrollHeight},1e3)});$("#navbarScroll").hide();$(".icon-bar").on("click",function(){$(".icon-bar").removeClass("shadow-pulse");$("#NavbarHelp").fadeOut();setCookie("NavbarHelp",1,365)});$(document).click(function(n){var i=$(n.target),t=$(".navbar-collapse"),r=t.hasClass("in");r!==!0||i.hasClass("navbar-toggle")||t.collapse("hide")});i=[];o=e();$.ajax({type:"GET",url:o+"Config/UgpMenu.xml",dataType:"xml",success:function(n){s(n)}});$.ajax({type:"POST",url:"USHowFishj.aspx/GetUgpMenu",crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(n){var i=n.d.Item2,t;let r=shiftBytes(i,0);t=$(r);s(t)},error:function(){}});n=function(n){if(n==undefined)return!1;switch(n.toLowerCase().trim()){case"true":case"yes":case"1":return!0;case"false":case"no":case"0":case null:return!1}}});