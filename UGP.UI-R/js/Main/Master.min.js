function CheckMapHeight(){var n=$("#DivTop").height(),i=$("#DivTop1").height();n==null&&(n=$("#MainGam").height(),n==null&&(n=200));n=n+i;var r=$("#MainHeader").height(),u=$("#divStep").height(),f=$("body").height(),t=f-(r+n+u+50);t>300&&!$("#m").hasClass("fix")&&($("#m").height(t),$("#m1").length>0&&$("#m1").height(t));MyMap.DoResize()}function getBaseUrl(){if(window.location.href.indexOf("Config/Pages")>-1){var n=window.location.href.match(/^.*\//)[0];return n.replace("Config/Pages/","")}return""}function ShowPage(n,t,i,r){var u,f;if(!ClsAccount.AccountInfo&&i){u="";r!=undefined&&r!=""&&(u="?ID="+r);GoLoginPage(n+u);return}n!=""&&((t==""||t==undefined)&&(t="_self"),t!="_blank"&&StartBusy("form1","در حال بارگذاری صفحه"),u="",NosaziCode!=""&&NosaziCode!="undefined"&&NosaziCode!=undefined?u="?NosaziCode="+NosaziCode+("&ID="+r):r!=undefined&&r!=""&&(u+="?ID="+r),f="",t!="_blank"&&(f=getBaseUrl()),window.open(f+n+u,t))}function openNav(){document.getElementById("mySidenav").style.width="490px"}function closeNav(){}function openUrlNewTab(n,t,i){if(t==undefined&&(t="_self"),/MSIE (\d+\.\d+);/.test(navigator.userAgent)||!!window.MSInputMethodContext&&!!document.documentMode||navigator.userAgent.indexOf("MSIE")>-1){var r=document.createElement("a");r.href=n;r.target=t;document.body.appendChild(r);r.click()}else window.open(n,t,i)}function LoadNosaziCode(n){var i,t;try{n!=""&&n!="undefined"&&n!=undefined?(t=n.split("-"),document.getElementById("txtDistrict1").value=t[0],document.getElementById("txtRegion1").value=t[1],document.getElementById("txtBlock1").value=t[2],document.getElementById("txtHouse1").value=t[3],document.getElementById("txtBuilding1").value=t[4],document.getElementById("txtApartment1").value=t[5],document.getElementById("txtShop1").value=t[6],NosaziCode=n):(i=getParameterByName("NosaziCode"),i!=""&&i!="undefined"&&(t=i.split("-"),document.getElementById("txtDistrict1").value=t[0],document.getElementById("txtRegion1").value=t[1],document.getElementById("txtBlock1").value=t[2],document.getElementById("txtHouse1").value=t[3],document.getElementById("txtBuilding1").value=t[4],document.getElementById("txtApartment1").value=t[5],document.getElementById("txtShop1").value=t[6],NosaziCode=i))}catch(r){}}function LoadDefaultCode(){var n,t;try{n=getParameterByName("NosaziCode");(n==""||n=="undefined")&&localStorage.getItem("LastNosaziCode")!=null&&localStorage.getItem("LastNosaziCode")!=""&&(n=localStorage.getItem("LastNosaziCode"));n!=""&&n!="undefined"&&(t=n.split("-"),document.getElementById("txtDistrict1").value=t[0],document.getElementById("txtRegion1").value=t[1],document.getElementById("txtBlock1").value=t[2],document.getElementById("txtHouse1").value=t[3],document.getElementById("txtBuilding1").value=t[4],document.getElementById("txtApartment1").value=t[5],document.getElementById("txtShop1").value=t[6]);NosaziCode=n}catch(i){}}function GetMapNosaziCode(n){try{var t=n.split("-"),i=t[0]+"-";return i+=t[1]+"-",i+=t[2]+"-",i+(t[3]+"-0-0-0")}catch(r){}}function getParameterByName(n){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+n+"=([^&#]*)"),t=i.exec(location.search);return t===null?"":decodeURIComponent(t[1].replace(/\+/g," "))}function getParameterByName2(n,t){n=n.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+n+"=([^&#]*)"),i=r.exec(t);return i===null?"":decodeURIComponent(i[1].replace(/\+/g," "))}function setCookie(n,t,i){var r=new Date,f,u;r.setTime(r.getTime()+i*864e5);f="expires="+r.toUTCString();u=n+"="+t+";";document.cookie=u}function getCookie(n){for(var t,r=n+"=",u=document.cookie.split(";"),i=0;i<u.length;i++){for(t=u[i];t.charAt(0)==" ";)t=t.substring(1);if(t.indexOf(r)==0)return t.substring(r.length,t.length)}return""}function GetAccountInfo(n){var t,i;AccountInfo!=""&&AccountInfo!=undefined&&AccountInfo!=null?(ClsAccount.AccountInfo=AccountInfo,ClsAccount.SessionId=ClsAccount.AccountInfo.SessionId,ClsAccount.IsLogin=!0):ClsAccount.IsLogin=!1;n!=undefined&&n(!0);try{t=$("#hfShManager").val();t!=""&&(i=JSON.parse(t),ClsAccount.Sh_ManagerConfirm_List=i)}catch(r){}}function ReEvent(){$("input.numbers").keypress(function(n){return n.keyCode==45||n.keyCode==46?!0:/\d/.test(String.fromCharCode(n.keyCode))});$("input.numbersLeft").keypress(function(n){return n.keyCode==45||n.keyCode==46?!0:/\d/.test(String.fromCharCode(n.keyCode))})}function ShowError(n){try{$("#lblError").css("color","red");n!=null?$("#lblError").text(n.BizErrors[0].ErrorTitel):$("#lblError").text("خطا در اجرای سرویس")}catch(t){}}function OpenUrlExternal(n){if(n&&n!=""){var t=baseUrl+"?pgname="+n;window.open(t,"_self")}}function OpenUrlExternal2(n,t){n&&n!=""&&((t==""||t==undefined)&&(t="_self"),window.open(n,t))}function ClearLocalStorage(n){localStorage.removeItem(n)}function ClearSomeLocalStorage(n){var t=n.length;Object.keys(localStorage).forEach(function(i){i.substring(0,t)==n&&localStorage.removeItem(i)})}function GetFormIndex(n){return Enumerable.From(GamsArray).Where(function(t){return t.Name==n}).Select(function(n){return n.Index}).FirstOrDefault()}function ShowPaymentUrl(n,t,i,r,u,f,e,o,s){var h="",c="",l;try{h=GetScope().GamInputData.CurrentNosaziCode;c=GetScope().GamInputData.NidWorkItem;tmpSelectedBankID=typeof BankInfo!="undefined"?BankInfo.SelectedID:0}catch(a){}h==""&&(h=NosaziCode);l="UShowFishj-Pay3.aspx?ExportFiche=false&Price="+n+"&FicheType="+t+"&DutyType="+i+"&NidFK="+r+"&NidFiche="+r+"&NidNosaziCode="+u+"&Districk="+f+"&BillID="+e+"&PayID="+o+"&PaymentID="+o+"&NosaziCode="+h+"&NidWorkItem="+c+"&FicheNo="+s+"&SelectedBank="+tmpSelectedBankID;openUrlNewTab(l)}function InsertLog(n){var i,t,r,u;try{i=GamsArray[n].Title;t=null;GetScope().GamInputData.CurrentNosaziCode!=undefined&&(t=GetScope().GamInputData.CurrentNosaziCode);r={pGamState:n+1,pEstateName:i,pNosaziCode:t};u=JSON.stringify(r);$.ajax({type:"POST",url:"UTransferGam.aspx/InsertLog",data:u,contentType:"application/json; charset=utf-8",dataType:"json"})}catch(f){}}function CheckIsDoneManagerConfirmAll(n,t,i,r){var u,f;if(GetScope().GamInputData.NidProc==undefined||i==0){n(!0);return}u=!1;u=AnalystConfirm(i);r!=undefined&&(f=AnalystConfirm(r),f==!0&&(resCi2=!0,u=!0));n(u)}function AnalystConfirm(n){var t=!1,i=!1,r="",u="";return ClsAccount.Sh_ManagerConfirm_List!=undefined&&ClsAccount.Sh_ManagerConfirm_List!=null&&ClsAccount.Sh_ManagerConfirm_List.length>0&&GetScope().GamInputData.Sh_ManagerConfirm_List.length==0&&(GetScope().GamInputData.Sh_ManagerConfirm_List=ClsAccount.Sh_ManagerConfirm_List),GetScope().GamInputData.Sh_ManagerConfirm_List!=undefined&&GetScope().GamInputData.Sh_ManagerConfirm_List.forEach(function(f){if(!i){var e=f.CI_ResourceManagerConfirmDetails;if(e==n){if(f.EumManagerConfirmLicence==3||f.EumManagerConfirmLicence==2)return r=f.ConfirmationDate,u=f.ConfirmationTime,!1;if(f.ConfirmationDate+f.ConfirmationTime>r+u)return t=!0,i=!0,t}else return!1}}),t}function CallConfirmManagerService(){var n={pNidProc:GetScope().GamInputData.NidProc,pDistrict:GetScope().GamInputData.District},t=JSON.stringify(n);$.ajax({type:"POST",url:ServiceAddress+"CheckIsDoneManagerConfirm",data:t,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(n){GetScope().GamInputData.Sh_ManagerConfirm_List=n.Sh_ManagerConfirm_List}})}function getQueryVariable(n,t){for(var r,f=n.substring(1),u=f.split("&"),i=0;i<u.length;i++)if(r=u[i].split("="),r[0]==t)return r[1];return!1}function GetScopeMenu(){return angular.element(document.getElementById("MainMenu")).scope()}function StartBusy1(n){n==undefined&&(n="لطفا منتظر بمانید...");StartBusy("MainGam",n)}function StopBusy1(){StopBusy("MainGam")}function AfterSaveRequest(n,t="false"){n.d!=null&&n.d.ErrorResult.BizErrors.length>0?(GetScope().GamInputData.NextDisable=!0,GetScope().Prop.ErrorMessage=n.d.ErrorResult.BizErrors[0].ErrorTitel.indexOf("حساب کاربری")>-1?"کاربر گرامی ابتدا باید وارد حساب کاربری خود شوید":n.d.ErrorResult.BizErrors[0].ErrorTitel.indexOf("سیاه")>-1?"شهروند محترم کد مورد نظر در لیست سیاه میباشد. جهت تعیین تکلیف به شهرداری منطقه مراجعه فرمایید":n.d.ErrorResult.BizErrors[0].ErrorKey==1e3?n.d.ErrorResult.BizErrors[0].ErrorTitel:ErrorMessageSaveStep):n.d!=null&&n.d.ErrorResult.HasErrors==!1&&n.d.Result.IsTruSave&&n.d.Result.NidWorkItem>0?(GetScope().GamInputData.NidWorkItem=n.d.Result.NidWorkItem,GetScope().GamInputData.NidProc=n.d.Result.NidProc,GetScope().GamInputData.NidAccount=n.d.Result.NidAccount,GetScope().$apply(),GamPlugin.End(),t==!0&&AddBazdidToSara(),GamPlugin.SavelocalStorage(GetScope().Config.ScopeName,GetScope().GamInputData),CallConfirmManagerService(),$("#btnShowRevisitReport").show()):GetScope().Prop.ErrorMessage="خطا در ثبت درخواست ، لطفا به راهبر سیستم اطلاع دهید";GetScope().$apply()}function ShowRevisitReport(){var n="RptRevisitAgent&ReportParameter=NidProc;"+GetScope().GamInputData.NidProc+",District;"+GetScope().GamInputData.District+",TokenKey;";window.open(FactorUrl+n,"_blank")}function PrintElem(n){var t=window.open("","PRINT","height=400,width=600");return t.document.write("<html><head><title>"+document.title+"<\/title>"),t.document.write("<\/head><body >"),t.document.write("<h1>"+document.title+"<\/h1>"),t.document.write(document.getElementById(n).innerHTML),t.document.write("<\/body><\/html>"),t.document.close(),t.focus(),t.print(),t.close(),!0}function GetCurrentDate(n){var i=[],t;return n==undefined&&(n=0),n=Number(n),now=persianDate().add("days",0),t=persianDate().add("days",n),i.push(now.pDate.year+"/"+padLeft(now.pDate.month,2)+"/"+padLeft(now.pDate.date,2)),i.push(t.pDate.year+"/"+padLeft(t.pDate.month,2)+"/"+padLeft(t.pDate.date,2)),i}function GenerateGuid(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(n){var t=Math.random()*16|0,i=n=="x"?t:t&3|8;return i.toString(16)})}function DeleteArchive(n){var e=confirm("ایا مطمئن هستید ؟"),r,u,f;if(e){var i=$(n).parent().prev(),o=$(i)[0].childNodes["0"].currentSrc,s=getParameterByName2("FName",o),t=1;try{t=District;t=GetScope().GamInputData.District}catch(h){}r={PDeleteFile:{NidFiles:[s]},pDomainName:t,pNidCategory:0};u=Object.getOwnPropertyDescriptor(AppConfig.Params,"ArcService_1").value;ArchiveService=AppConfig.GetParam(u,t);ArchiveService+="/json2/";f=JSON.stringify(r);StartBusy("divUploader","در حال دریافت کد آرشیو");$request=$.ajax({type:"POST",url:ArchiveService+"DeleteDataFile",data:f,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(){StopBusy("divUploader");$(i).parent().parent().remove()},error:function(n){StopBusy("divUploader");var t=n}})}}function CallRequestToken(n){$request=$.ajax({type:"POST",url:SecurityService+"RequestToken",crossDomin:!0,dataType:"json",processdata:!0,success:function(){n()},error:function(){}})}function isEmpty(n){return!n.length}function isBlank(n){return isEmpty(n.trim())||n=="&nbsp;"||n=="undefined"}var version=103,AccountInfo=null,EumPage={Start:"Start",Select:"Select",SelectNo:"SelectNo",Savabegh:"Savabegh",WorkFlow:"WorkFlow",Account:"Account",Upload:"Upload",Avarez:"Avarez",AvarezDaramad:"AvarezDaramad",SaveRequest:"SaveRequest",SelectBazdid:"SelectBazdid",PPayKarshenasi:"PPayKarshenasi",ElamZabete:"ElamZabete",ShFani:"ShFani",ShZabete:"ShZabete",Tavafoghat:"Tavafoghat",Zavabet:"Zavabet",ShZabeteYazd:"ShZabeteYazd",Estelam:"Estelam",Export:"Export",Mokatebat:"Mokatebat",ArchitectMaps:"ArchitectMaps",Commission:"Commission",PishFactor:"PishFactor",CheckShahrsaz:"CheckShahrsaz",Engineer:"Engineer",EngineerInfo:"EngineerInfo",EngineerYazdDafater:"EngineerYazdDafater",EngineerQuata:"EngineerQuata",MapControl:"MapControl",Bime:"Bime",UploadNewNosazi:"UploadNewNosazi",GetNewNosaziCode:"GetNewNosaziCode"},UpBtHideForce=!1,IsSharNamaRun=!1,ClsAccount,ClsSMS2,resCi2,GamPlugin,GetUrlByDomain,ClsMenu,HasEnglish;typeof App=="undefined"&&(App=angular.module("App",[]));try{function n(){var n="width=700,height=500";(navigator.userAgent.indexOf("Opera")||navigator.userAgent.indexOf("OPR"))!=-1?window.open("uBrowser.aspx?b=Opera","_blank",n):navigator.userAgent.indexOf("Chrome")!=-1?window.open("uBrowser.aspx?b=Chrome","_blank",n):navigator.userAgent.indexOf("Safari")!=-1?window.open("uBrowser.aspx?b=Safari","_blank",n):navigator.userAgent.indexOf("Firefox")!=-1?window.open("uBrowser.aspx?b=Firefox","_blank",n):(navigator.userAgent.indexOf("MSIE")!=-1||!!document.documentMode==!0)&&document.documentMode<11&&window.open("uBrowser.aspx?b=IE"+document.documentMode,"_blank",n)}$(window).resize(function(){try{var n=$("#MainHeader").height();$("body").get(0).style.setProperty("--Headerheight2",n+20+"px");MyMap.DoResize();CheckMapHeight()}catch(t){}});LoadSelected()}catch(ex){}var isOpera=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,isFirefox=typeof InstallTrigger!="undefined",isSafari=Object.prototype.toString.call(window.HTMLElement).indexOf("Constructor")>0||function(n){return n.toString()==="[object SafariRemoteNotification]"}(!window.safari||safari.pushNotification),isIE=/*@cc_on!@*/!1||!!document.documentMode,isEdge=!isIE&&!!window.StyleMedia,isChrome=!!window.chrome&&!!window.chrome.webstore,isBlink=(isChrome||isOpera)&&!!window.CSS;LoadDefaultCode();Number.prototype.formatMoney=function(n,t,i){var u=this,n=isNaN(n=Math.abs(n))?2:n,t=t==undefined?".":t,i=i==undefined?",":i,e=u<0?"-":"",f=parseInt(u=Math.abs(+u||0).toFixed(n))+"",r=(r=f.length)>3?r%3:0;return e+(r?f.substr(0,r)+i:"")+f.substr(r).replace(/(\d{3})(?=\d)/g,"$1"+i)+(n?t+Math.abs(u-f).toFixed(n).slice(2):"")};ClsAccount={IsLogin:!1,AccountInfo:null,UserInfo:{NidUser:null},SessionId:""};$(document).ready(function(){typeof AppConfig!="undefined"&&AppConfig.LoadObj(function(){$(document).triggerHandler("onLoadArchive")});$(window).scroll(function(){$(window).scrollTop()>450&&!UpBtHideForce?$("#GoUpBt").fadeIn(500):$("#GoUpBt").fadeOut(500)});$("input[type=number]").focus(function(){$("#GoUpBt").hide()});$("input[type=text]").focus(function(){$("#GoUpBt").hide()});$("input[type=number]").keypress(function(){$("#GoUpBt").hide()});$("input[type=number]").keyup(function(){$("#GoUpBt").hide()});$("input[type=number]").keydown(function(){$("#GoUpBt").hide()});GetAccountInfo();$("body").on("DOMNodeInserted","div",function(n){n.currentTarget.id=="DivTop"&&CheckMapHeight()});$("#DivTop").ready(function(){CheckMapHeight()});$("body").on("DOMNodeInserted","div",function(n){n.currentTarget.id=="DivTop1"&&CheckMapHeight()});$("#imgLogo").attr("title",$("#hfVersion").val()+"."+version);$("#DivFooter").css("height",$(window).height()-$("html").height()+"px")});ClsSMS2={NumOfWord:5,ConfirmCodeOk:!1,SendConfirmSMS:function(n,t){if(n==undefined&&(n=GetScope().GamInputData.OwnerPhone),t==undefined&&(t=""),$("#lblSMS2").text(""),$("#lblSMS2").css("color","red"),n.startsWith("09")){if(n.length<11){$("#lblSMS2").text("شماره تماس همراه باید ۱۱ رقمی باشد");return}}else{$("#lblSMS2").text("شماره همراه را به صورت صحیح وارد نمایید");return}var i=n,r={pNumber:i,pNosaziCode:t,FormuleMode:!1},u=JSON.stringify(r);StartBusy("btnSend");$request=$.ajax({type:"POST",url:"UTransferGam.aspx/SendConfirmSMS",data:u,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(n){StopBusy("btnSend");n.d.ErrorResult.BizErrors.length>0?($("#lblSMS2").text(n.d.ErrorResult.BizErrors[0].ErrorTitle),$("#lblSMS2").css("color","red")):($("#txtConfirmCode2").show(),$("#txtOwnerPhone").prop("disabled","true"),$("#btnSend").prop("disabled","true"),$("#lblSMS2").text("کد تاییدیه با موفقیت ارسال شد"),$("#lblSMS2").css("color","green"))},error:function(){$("#lblSMS2").text(msg.d.ErrorResult.BizErrors[0].ErrorTitle);StopBusy()}})},ConfirmCode_keypress:function(){$("#txtConfirmCode2").val().length==ClsSMS2.NumOfWord&&this.CheckConfirmCode()},CheckConfirmCode:function(){var n=$("#txtConfirmCode2").val(),t={pNumber:n},i=JSON.stringify(t);$("#lblSMS2").text("");$("#imgError").hide();StartBusy("txtConfirmCode2");$request=$.ajax({type:"POST",url:"UTransferGam.aspx/CheckConfirmCode",data:i,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(n){StopBusy("txtConfirmCode2");n.d==!0?(ClsSMS2.ConfirmCodeOk=!0,GetScope().GamInputData!=undefined&&(GetScope().GamInputData.ConfirmCodeOk=!0),$("#txtConfirmCode2").attr("disabled","disabled"),$("#txtConfirm").css("color","green"),$("#lblSMS2").css("color","green"),$("#lblSMS2").text("کد تاییدیه صحیح می باشد"),$("#imgConfirmStatus").prop("src","Images/tik.png"),$("#btnSave").removeClass("disabled"),$("#btnSave").prop("disabled",!1),$("#imgError2").hide(),$("#imgTick2").show()):($("#imgError2").show(),$("#imgTick2").hide(),$("#txtConfirm").css("color","red"),$("#lblSMS2").css("color","red"),$("#lblSMS2").text("کد تاییدیه معتبر نمی باشد"),$("#imgConfirmStatus").prop("src","Images/Error.png"))},error:function(){StopBusy("txtConfirmCode")}})}};resCi2=!1;GamPlugin=new function(){function n(n){try{$('img[id^="divDeskShap"]:not(:last)').prop("src","images/norm.png");$('img[id^="divDeskShap"]').last().prop("src","images/end-norm.png");this.CurrentStep==GamsArray.length-1?document.getElementById("divDeskShap"+this.CurrentStep).src="images/end-active.png":(document.getElementById("divDeskShap"+this.CurrentStep).src="images/active.png",$("#divDeskShap"+this.CurrentStep).parent().parent().addClass("active"));n==GamPlugin.AllStep()||n==undefined?$("#btnNext").hide():$("#btnNext").show()}catch(t){}}function t(){var n=GamPlugin.GetlocalStorage(GetGamInfo());n!=null&&n!=undefined?GamPlugin.GoStep(n.CurrentStep,!0):GamPlugin.GoStep(0,!0)}this.Config={currentStepName:""};this.CurrentStep;CurrentStep=0;AllStep=0;this.removeStep=null;this.AllStep=function(){return GetScope().GamsArray.length-1};this.init=function(){t()};this.SkipGam=function(){isPreStep?GamPlugin.preStep():GamPlugin.nextStep()};this.nextStep=function(){var t,i,n;isPreStep=!1;CurrentStep<this.AllStep()&&(t={CurrentStep:0},i=$(document).triggerHandler("onCheckGam",t),i.AllowNextPage==!0&&($(".active").removeClass("active"),n=this.CurrentStep+1,n==this.removeStep&&(n=n+1),GamPlugin.GoStep(n)))};this.preStep=function(){isPreStep=!0;CurrentStep>0&&($(".active").removeClass("active"),$("#G"+CurrentStep).addClass("active"),$(".btnNext").val("گام بعدی"));var n=CurrentStep-1;n==this.removeStep&&(n=n-1);GamPlugin.GoStep(n)};this.nextStepWithOutCheck=function(){var t,n;isPreStep=!1;CurrentStep<this.AllStep()&&(t={CurrentStep:0},$(".active").removeClass("active"),n=CurrentStep+1,n==this.removeStep&&(n=n+1),GamPlugin.GoStep(n))};this.SelectStepById=function(t){n(t)};this.GoStep=function(t,i){try{t>GetScope().GamsArray.length-1&&(t=t-1);$(".active").removeClass("active");$("#Step"+CurrentStep).slideToggle();CurrentStep=t;$("#Step"+CurrentStep).slideToggle();$("#G"+t).addClass("active");CurrentStep>0?($(".btnPre").show(),$(".btnPre").removeAttr("disabled")):CurrentStep==0&&$("#btnPre").hide();n(CurrentStep);GamPlugin.CurrentStep=CurrentStep;var r={CurrentStep:0,pFromLoad:i};$(document).triggerHandler("onLoadStep",r);$("#StepTextNum").text(CurrentStep+1);$("#StepTextMobile").text(GetScope().GamsArray[CurrentStep].Title);$("#TotalGam").text(GetScope().GamsArray.length);InsertLog(t)}catch(u){}};this.End=function(){$("#btnPre").hide()};this.SavelocalStorage=function(n,t){var r=JSON.stringify(t),u=EncryptData(r);localStorage.setItem(n,u);i(r)};this.GetlocalStorage=function(n){var t,i,r;try{if(t=localStorage.getItem(n),t!=null&&t!="null")return i=DecryptData(t),r=JSON.parse(i),r}catch{return null}};this.RemovelocalStorage=function(n){localStorage.removeItem(n)};this.ResetGam=function(){ClearLocalStorage(GetScope().Config.ScopeName);$("#btnPre").hide();$("#btnNext").hide()};this.ResetGamAndRedirect=function(){ClearLocalStorage(GetScope().Config.ScopeName);$("#btnPre").hide();GetScope().ResetScope();GamPlugin.CurrentStep=0;GamPlugin.GoStep(0)};this.HidePreButton=function(){$("#btnPre").hide()};this.HideNextButton=function(){$("#btnNext").hide()};this.ShowNextButton=function(){$("#btnNext").show()};this.ShowPreButton=function(){$("#btnPre").show()};var i=function(n){if(GetScope().GamInputData.NidProc!=undefined){var t={pNidProc:GetScope().GamInputData.NidProc,pGamInputDataStr:n},i=JSON.stringify(t);$.ajax({type:"POST",url:"UTransferGam.aspx/SaveGam",data:i,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(){},error:function(){}})}}};GetUrlByDomain=function(n,t){var r=n,i;return n.indexOf("#")>-1?(i="#"+t+"#",n.substring(n.indexOf(i)+3,n.lastIndexOf(i))):n};ClsMenu={ID:null,CurrentTitle:null};HasEnglish=/^[A-Za-z0-9]*$/;