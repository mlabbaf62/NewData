function LoadOutSideFunction(){GetScope().PayFish=function(n,t,i,r,u,f,e,o,s){t==undefined&&(t=1);FishFunc.PayFish(n,t,i,r,u,f,e,o,s)};GetScope().PrintFiche=function(n){FishFunc.PrintFiche(n)};GetScope().PrintFicheDaramad=function(n){FishFunc.PrintFicheDaramad(n)};GetScope().PrintFicheDetail=function(n){FishFunc.PrintFicheDetail(n)};typeof BankInfo!="undefined"&&(GetScope().BankInfo=BankInfo);GetScope().ShowPrintDetail=typeof ShowPrintDetail!="undefined"?ShowPrintDetail:!1;GetScope().PayKarshenasi=function(){if(GamPlugin.SavelocalStorage(GetScope().Config.ScopeName,GetScope().GamInputData),GetScope().GamInputData.CurrentJobLocation==null&&GetScope().ShowDafater&&GetScope().JobLocationList!=null)GetScope().Prop.ErrorMessage="دفاتر انتخاب نشده است";else{var t=GetScope().GamInputData.CurrentNosaziCode.split("-")[0],n="UShowFishj-Pay3.aspx?Type=HK&DutyType=0&Amount="+GetScope().GamInputData.CostKarshenasi+"&District="+t+"&NidNosaziCode="+GetScope().GamInputData.NidNosaziCode;GetScope().ShowDafater&&(n="UShowFishj-Pay3.aspx?Type=HK&DutyType=0&Amount="+GetScope().GamInputData.CostKarshenasi+"&District="+t+"&NidNosaziCode="+GetScope().GamInputData.NidNosaziCode+"&IbanNumber="+(GetScope().GamInputData.CurrentJobLocation!=undefined?GetScope().GamInputData.CurrentJobLocation.Altitude:""));n+="&NosaziCode="+GetScope().GamInputData.CurrentNosaziCode+"&NidWorkItem="+GetScope().GamInputData.NidWorkItem;GetScope().GamInputData.Sh_RevisitAgentRandom!=undefined&&(n+="&Comment="+GetScope().GamInputData.Sh_RevisitAgentRandom.Name+" "+GetScope().GamInputData.Sh_RevisitAgentRandom.LastName+"#"+GetScope().GamInputData.Sh_RevisitAgentRandom.NidRevisitAgent);openUrlNewTab(n)}};GetScope().InsertPaymentLog=function(n,t,i,r){var u={pPaymentLog:{FicheType:0,PaymentTitle:"هزینه کارشناسی",Price:GetScope().GamInputData.CostKarshenasi,NidAccount:ClsAccount.AccountInfo.NidAccount,AccountName:ClsAccount.AccountInfo.OwnerFirstName+" "+ClsAccount.AccountInfo.OwnerLastName+"( "+ClsAccount.AccountInfo.AccountName+" )",NidUser:GetScope().NidUser,FullUserName:GetScope().FullUserName,NidVisitor:GetScope().GamInputData.Sh_RevisitAgentRandom!=undefined?GetScope().GamInputData.Sh_RevisitAgentRandom.NidRevisitAgent:"",VisitorName:GetScope().GamInputData.Sh_RevisitAgentRandom!=undefined?GetScope().GamInputData.Sh_RevisitAgentRandom.Name+" "+GetScope().GamInputData.Sh_RevisitAgentRandom.LastName:"",NidWorkItem:GetScope().GamInputData.NidWorkItemText,TrackingCode:t,IsTruePayment:n,Description:location.search+"\r\n"+r,NosaziCode:GetScope().GamInputData.CurrentNosaziCode,BankName:i}},f=JSON.stringify(u);$.ajax({type:"POST",url:"UShowPayments.aspx/InsertPaymentLog",data:f,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0})};GetScope().LoadFromRequestMain=function(n,t){StartBusy1("درحال بارگذاری اطلاعات");var i={pNidProc:n,pNidAccount:ClsAccount.AccountInfo.NidAccount},r=JSON.stringify(i);$.ajax({type:"POST",data:r,url:"UTransferGam.aspx/StepGetRequest",contentType:"application/json; charset=utf-8",dataType:"json",success:function(n){var i;if(StopBusy1(),i=n.d,i.Request_Info==null){alert("این درخواست متعلق به این کاربر نمی باشد");return}if(i.Request_Info.EumRequestStatus==8){alert("این درخواست ابطال شده است");GamPlugin.ResetGamAndRedirect();return}if(i.Request_Info.EumRequestStatus==7){alert("این درخواست به مرحله پایان رسیده است");GamPlugin.ResetGamAndRedirect();return}if(i.Request_Info.EumRequestStatus==10){alert("این درخواست در وضعیت بایگانی موقت است");GamPlugin.ResetGamAndRedirect();return}if(GetScope().p=i.Request_Info.NidAccount,i.Request_Info.GamInputData!=null&&i.Request_Info.GamInputData!=""&&i.Request_Info.GamInputData!=" "){try{GetScope().GamInputData=JSON.parse(i.Request_Info.GamInputData)}catch(e){}GetScope().IsReadOnly=!0;GetScope().GamInputData.EumRequestStatus=i.Request_Info.EumRequestStatus;GetScope().GamInputData.IsRequireBazdid=i.Request_Info.IsRequireBazdid;GetScope().GamInputData.ProcInitiator=i.ProcInitiator;GetScope().GamInputData.CurrentNosaziCode=i.Request_Info.NosaziCode;GetScope().GamInputData.District=i.Request_Info.District;GetScope().GamInputData.ArchiveBizCode==undefined&&(GetScope().GamInputData.ArchiveBizCode=i.Request_Info.ArchiveBizCode)}else GetScope().GamInputData.EumRequestStatus=i.Request_Info.EumRequestStatus,GetScope().GamInputData.NidAccount=i.Request_Info.NidAccount,GetScope().GamInputData.District=i.Request_Info.District,GetScope().GamInputData.NidProc=i.Request_Info.NidProc,GetScope().GamInputData.Address=i.Request_Info.RequesterAddress,GetScope().GamInputData.FicheRes.isTruePaymentNosazi=!1,GetScope().GamInputData.NidWorkItem=i.Request_Info.NidWorkItem,i.Bazdid!=null&&(GetScope().GamInputData.CurrentNosaziCode=i.Bazdid.NosaziCode,GetScope().GamInputData.OwnerType=i.Bazdid.OwnerType,GetScope().GamInputData.NidWorkItemText=i.Bazdid.NidWorkItem,GetScope().GamInputData.BazdidDate=i.Bazdid.BazdidDate,GetScope().GamInputData.BazdidTime=i.Bazdid.BazdidTime,GetScope().GamInputData.ResourceId=i.Bazdid.ResourceId,i.Bazdid.VisitOfficerFullName!=null&&i.Bazdid.VisitOfficerFullName!=""&&GetScope().GamInputData.Sh_RevisitAgentRandom!=undefined&&(GetScope().GamInputData.Sh_RevisitAgentRandom.Name=i.Bazdid.VisitOfficerFullName.split(" ")[0],GetScope().GamInputData.Sh_RevisitAgentRandom.LastName=i.Bazdid.VisitOfficerFullName.split(" ")[1],GetScope().GamInputData.Sh_RevisitAgentRandom.UserName=i.Bazdid.VisitOfficerUserName,GetScope().GamInputData.Sh_RevisitAgentRandom.Phone=i.Bazdid.VisitOfficerTel)),GetScope().GamInputData.CurrentNosaziCode=i.Request_Info.NosaziCode,GetScope().GamInputData.LetterNo=i.Request_Info.LetterNo,GetScope().GamInputData.LetterDate=i.Request_Info.LetterDate,GetScope().GamInputData.EstateOwner=i.Request_Info.RequesterName,GetScope().GamInputData.ArchiveBizCode=i.Request_Info.ArchiveBizCode,GetScope().GamInputData.ProcInitiator=i.ProcInitiator,GetScope().GamInputData.AllowNextPage=!0,GetScope().GamInputData.LoadFromOld=!0,GetScope().IsReadOnly=!0;GetScope().GamInputData.NidNosaziCode==""&&(GetScope().GamInputData.NidNosaziCode=i.Request_Info.NidNosaziCode);GetScope().GamInputData.Sh_ManagerConfirm_List=i.ManagerConfirmList;GetScope().GamInputData.IsCouncil=i.Request_Info.EumRequestStatus!=5?!0:!1;try{var f=Enumerable.From(GamsArray).Where(function(n){return n.Name==EumPage.SaveRequest}).FirstOrDefault(),r=$(GamsArray).index(f),u=GamPlugin.GetlocalStorage(GetGamInfo());u!=undefined&&u.CurrentStep>r&&(r=u.CurrentStep);GetScope().GamInputData.CurrentStep!=undefined&&GetScope().GamInputData.CurrentStep!=null&&GetScope().GamInputData.CurrentStep>r&&(r=GetScope().GamInputData.CurrentStep);GamPlugin.SavelocalStorage(GetScope().Config.ScopeName,GetScope().GamInputData);GamPlugin.GoStep(r);GetScope().GamInputData.CurrentStep=r;GetScope().$apply()}catch(e){}t!=undefined&&t(!0,i)}})}}function SendSMSGam(n,t,i){try{var r={pCode:n,pInputData:{NidWorkItem:GetScope().GamInputData.NidWorkItem,CurrentNosaziCode:GetScope().GamInputData.CurrentNosaziCode},Price:t!=null&&t!=undefined?t:0,PeygiriCode:i!=null&&i!=undefined?i:0},u=JSON.stringify(r);$.ajax({type:"POST",url:"UTransferGam.aspx/SendSMSForGam",data:u,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(){},error:function(){}})}catch(f){}}function EncryptData(n){return CryptoJS.AES.encrypt(n,SKey).toString()}function DecryptData(n){const t=CryptoJS.AES.decrypt(n,SKey);return t.toString(CryptoJS.enc.Utf8)}function SetLocalStorage(n,t){var i=JSON.stringify(t),r=EncryptData(i);localStorage.setItem(n,r)}function GetLocalStorage(n){var t=localStorage.getItem(n),i=DecryptData(t);return JSON.parse(i)}var FishFunc=new function(){var t=!1;this.LoadFich=function(){var o=getParameterByName("RequestId"),t,u,f,e,i,r;o!=""&&(t=FishFunc.GetPaymentInfo(o),t!=null&&(FishFunc.ResPay=t,t.BackFromBank==!0&&(FishFunc.BackFromBank=!0,u=GamPlugin.GetlocalStorage(GetScope().Config.ScopeName),u!=null&&(GetScope().GamInputData=u),GetScope().GamInputData.FicheRes.TrackingCode=t.TrackingCode,f=!1,e="پرداخت انجام نشده است",(t.IsTruePayment==!0||t.TrackingCode!=""&&t.TrackingCode!=null)&&(f=!0,e="پرداخت با موفقیت انجام شد"),i=null,t.FicheType==1?i=Enumerable.From(GetScope().GamInputData.FishList).Where(function(n){return n.Duty_fiche.FicheNo==t.FicheNo}).FirstOrDefault():t.FicheType==2?i=Enumerable.From(GetScope().GamInputData.FishListSenfi).Where(function(n){return n.Duty_fiche.FicheNo==t.FicheNo}).FirstOrDefault():t.FicheType==3?i=Enumerable.From(GetScope().GamInputData.FishListPasmand).Where(function(n){return n.Duty_fiche.FicheNo==t.FicheNo}).FirstOrDefault():t.FicheType==4?i=Enumerable.From(GetScope().GamInputData.FishListDarAmad).Where(function(n){return n.FicheNo==t.FicheNo||n.Income_Fiche!=undefined&&n.Income_Fiche.FicheNo==t.FicheNo}).FirstOrDefault():t.FicheType==5&&(i=Enumerable.From(GetScope().GamInputData.FishListAvarezDarAmad).Where(function(n){return n.FicheNo==t.FicheNo||n.Income_Fiche!=undefined&&n.Income_Fiche.FicheNo==t.FicheNo}).FirstOrDefault()),i!=null&&f&&(i.Result={},i.Result.isTruePayment=!0,i.Result.PaymentMessage=e,i.Result.BillID=t.BillID,i.Result.PaymentID=t.PaymentID,i.Result.SaleReferenceId=t.TrackingCode,i.Result.Price=t.Price,i.Result.Price=t.Price,SendSMSGam(t.FicheType,t.Price,t.TrackingCode)),GetScope().$apply(),GamPlugin.SavelocalStorage(GetScope().Config.ScopeName,GetScope().GamInputData))));r=null;typeof GamsArray!="undefined"&&(r=GamsArray[GamPlugin.CurrentStep],r!=null&&r.AvarezType!=undefined&&(r.AvarezType.toString().indexOf(1)>-1&&(GetScope().GamInputData.ShowFicheNosazi=!0,GetScope().GamInputData.ShowFichePasmand=!1,GetScope().GamInputData.ShowFicheDarAmad=!1),r.AvarezType.toString().indexOf(2)>-1&&(GetScope().GamInputData.ShowFichePasmand=!0),r.AvarezType.toString().indexOf(3)>-1&&(GetScope().GamInputData.ShowFicheDarAmad=!0),r.AvarezType.toString().indexOf(4)>-1&&(GetScope().GamInputData.ShowFicheAvarezDarAmad=!0),r.AvarezType.toString().indexOf(5)>-1&&(GetScope().GamInputData.ShowFicheSenfi=!0)),GetScope().GamInputData.CalculateDarAmad=r.CalculateDarAmad!=undefined?r.CalculateDarAmad:!1,GetScope().GamInputData.AlwaysCalculate=r.AlwaysCalculate!=undefined?r.AlwaysCalculate:!1);(FishFunc.ResPay==null||FishFunc.BackFromBank==!0&&FishFunc.ResPay!=null&&FishFunc.ResPay.FicheType==0)&&n();GetScope().GamInputData.NidWorkItem>0&&GamPlugin.HidePreButton()};this.LoadFichKarshenasi=function(){var t=getParameterByName("RequestId"),n=FishFunc.GetPaymentInfo(t),i,r;n!=null&&n.BackFromBank==!0&&(GetScope().GamInputData.FicheRes.TrackingCode=n.TrackingCode,i=!1,r="پرداخت انجام نشده است",(n.IsTruePayment==!0||n.TrackingCode!=""&&n.TrackingCode!=null)&&(i=!0,r="پرداخت با موفقیت انجام شد"),n.FicheType==0&&(n.IsTruePayment==!0?(GetScope().GamInputData.FicheRes.isHKTruePayment=!0,GetScope().GamInputData.FicheRes.PaymentMessage="پرداخت با موفقیت انجام شد",GetScope().InsertPaymentLog(!0,n.TrackingCode),SendSMSGam(0,n.Price,n.TrackingCode)):(GetScope().InsertPaymentLog(!1,n.TrackingCode),GetScope().GamInputData.FicheRes.isHKTruePayment=!1)),GamPlugin.SavelocalStorage(GetScope().Config.ScopeName,GetScope().GamInputData),FishFunc.ClearPaymentInfo(t))};this.BackFromBank=!1;var i=function(){$.ajax({type:"POST",url:"USHowFishj.aspx/GetSignature",crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(n){RequestGuid=n.d.Result.RequestID;EncryptCode=n.d.Result.EncryptCode;e();o()},error:function(){}})},n=function(){(GetScope().GamInputData.FicheRes.ErrorMessageNosazi="",GetScope().GamInputData.CurrentNosaziCode!=undefined&&GetScope().GamInputData.CurrentNosaziCode!="")&&(GetScope().GamInputData.FicheRes.HasError=!1,r(),i(),u(),f())},r=function(){var n,t,i,r;if(FishFunc.BackFromBank==!1){if(n=0,GetScope().GamInputData.NidWorkItem!=""&&(n=GetScope().GamInputData.NidWorkItem),t=!1,n==0?IsCalcInRevisit=!1:t=IsCalcInRevisit,GetScope().GamInputData.ShowFicheNosazi==!1)return;if(GetScope().GamInputData.FishList!=undefined&&GetScope().GamInputData.FishList!=null&&GetScope().GamInputData.FishList.length>0&&GetScope().GamInputData.FishList[0].Result!=undefined&&GetScope().GamInputData.FishList[0].Result.isTruePayment==!0)return;i={pCode:GetScope().GamInputData.CurrentNosaziCode,pDutyType:1,pNidWorkItem:n,pIsCalcInRevisit:t,pNidWorkFlowDeff:GetScope().GamInputData.SelectedWorkFlow.NidWorkflowDeff};r=JSON.stringify(i);GetScope().Prop.ErrorMessage=null;GetScope().Prop.ErrorMessage2=null;GetScope().isBusy=!0;GetScope().$apply();GetScope().GamInputData.FishList=null;StartBusy("MainGam","درحال محاسبه بدهی عوارض نوسازی");$.ajax({type:"POST",url:ServiceAddress+"CalculateDutyNosaziAndFicheList",data:r,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(n){GetScope().isBusy=!1;StopBusy("MainGam");n.ErrorResult.BizErrors.length>0?($(n.ErrorResult.BizErrors).each(function(n,t){t.ErrorAction==0&&(GetScope().GamInputData.FicheRes.HasError=!0)}),GetScope().GamInputData.FicheRes.ErrorMessageNosazi=n.ErrorResult.BizErrors[0].ErrorTitel,GetScope().ErrorColorN="red"):n.CalculateDutyAndFicheList==null?(GetScope().GamInputData.FicheRes.HasError=!0,GetScope().GamInputData.FicheRes.ErrorMessageNosazi="کد نوسازی معتبر نمیباشد",GetScope().ErrorColorN="red"):n.CalculateDutyAndFicheList.length==0?(GetScope().GamInputData.FicheRes.ErrorMessageNosazi="این کد نوسازی فاقد بدهی است",GetScope().ErrorColorN="green"):GetScope().GamInputData.FishList=n.CalculateDutyAndFicheList;GetScope().$apply();GamPlugin.SavelocalStorage(GetScope().Config.ScopeName,GetScope().GamInputData)},error:function(){StopBusy("MainGam");alert("خطا در اجرای سرویس عوارض");GetScope().GamInputData.FicheRes.HasError=!0}})}},u=function(){var n,t,i;if(GetScope().GamInputData.FicheRes.ErrorMessagePasmand="",GetScope().GamInputData.ShowFichePasmand){if(GetScope().GamInputData.FishListPasmand!=undefined&&GetScope().GamInputData.FishListPasmand!=null&&GetScope().GamInputData.FishListPasmand.length>0&&GetScope().GamInputData.FishListPasmand[0].Result!=undefined&&GetScope().GamInputData.FishListPasmand[0].Result.isTruePayment==!0)return;FishFunc.BackFromBank==!1&&(GetScope().GamInputData.FishListPasmand=null,n=0,GetScope().GamInputData.NidWorkItem!=""&&(n=GetScope().GamInputData.NidWorkItem),t={pCode:GetScope().GamInputData.CurrentNosaziCode,pDutyType:3,pIsCalcInRevisit:IsCalcInRevisit,pNidWorkItem:n},i=JSON.stringify(t),GetScope().Prop.ErrorMessage=null,StartBusy("DivFichPasmand","درحال محاسبه فیش پسماند"),$.ajax({type:"POST",url:ServiceAddress+"CalculateDutyNosaziAndFicheList",data:i,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(n){GetScope().isBusy=!1;StopBusy("DivFichPasmand");n.ErrorResult.BizErrors.length>0?($(n.ErrorResult.BizErrors).each(function(n,t){t.ErrorAction==0&&(GetScope().GamInputData.FicheRes.HasError=!0)}),GetScope().GamInputData.FicheRes.ErrorMessagePasmand=n.ErrorResult.BizErrors[0].ErrorTitel,GetScope().ErrorColorP="red"):n.CalculateDutyAndFicheList==null?(GetScope().GamInputData.FicheRes.HasError=!0,GetScope().GamInputData.FicheRes.ErrorMessagePasmand="کد نوسازی معتبر نمیباشد",GetScope().ErrorColorP="red"):n.CalculateDutyAndFicheList.length==0?(GetScope().GamInputData.FicheRes.ErrorMessagePasmand="این کد نوسازی فاقد بدهی است",GetScope().ErrorColorP="Green",GetScope().GamInputData.NextDisable=!1):(n.CalculateDutyAndFicheList.length>0,GetScope().GamInputData.FishListPasmand=n.CalculateDutyAndFicheList);GetScope().$apply();GamPlugin.SavelocalStorage(GetScope().Config.ScopeName,GetScope().GamInputData)},error:function(){StopBusy("DivFichPasmand");GetScope().GamInputData.FicheRes.HasError=!0}}))}},f=function(){var t,n,i,r;if(GetScope().GamInputData.FicheRes.ErrorMessageSenfi="",t=GetScope().GamInputData.CurrentNosaziCode.split("-")[6],t==0&&(GetScope().GamInputData.ShowFicheSenfi=!1),GetScope().GamInputData.ShowFicheSenfi){if(GetScope().GamInputData.FishListSenfi!=undefined&&GetScope().GamInputData.FishListSenfi!=null&&GetScope().GamInputData.FishListSenfi.length>0&&GetScope().GamInputData.FishListSenfi[0].Result!=undefined&&GetScope().GamInputData.FishListSenfi[0].Result.isTruePayment==!0)return;FishFunc.BackFromBank==!1&&(GetScope().GamInputData.FishListSenfi=null,n=0,GetScope().GamInputData.NidWorkItem!=""&&(n=GetScope().GamInputData.NidWorkItem),i={pCode:GetScope().GamInputData.CurrentNosaziCode,pDutyType:2,pIsCalcInRevisit:IsCalcInRevisit,pNidWorkItem:n},r=JSON.stringify(i),GetScope().Prop.ErrorMessage=null,StartBusy("DivFichSenfi","درحال محاسبه فیش صنفی"),$.ajax({type:"POST",url:ServiceAddress+"CalculateDutyNosaziAndFicheList",data:r,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(n){GetScope().isBusy=!1;StopBusy("DivFichSenfi");n.ErrorResult.BizErrors.length>0?($(n.ErrorResult.BizErrors).each(function(n,t){t.ErrorAction==0&&(GetScope().GamInputData.FicheRes.HasError=!0)}),GetScope().GamInputData.FicheRes.ErrorMessageSenfi=n.ErrorResult.BizErrors[0].ErrorTitel,GetScope().ErrorColorP="red"):n.CalculateDutyAndFicheList==null?(GetScope().GamInputData.FicheRes.HasError=!0,GetScope().GamInputData.FicheRes.ErrorMessageSenfi="کد صنفی معتبر نمیباشد",GetScope().ErrorColorP="red"):n.CalculateDutyAndFicheList.length==0?(GetScope().GamInputData.FicheRes.ErrorMessageSenfi="این کد صنفی فاقد بدهی است",GetScope().ErrorColorP="Green",GetScope().GamInputData.NextDisable=!1):(n.CalculateDutyAndFicheList.length>0,GetScope().GamInputData.FishListSenfi=n.CalculateDutyAndFicheList);GetScope().$apply();GamPlugin.SavelocalStorage(GetScope().Config.ScopeName,GetScope().GamInputData)},error:function(){StopBusy("DivFichSenfi");GetScope().GamInputData.FicheRes.HasError=!0}}))}},e=function(){var n,t,i;(GetScope().GamInputData.FicheRes.ErrorMessageDaramad="",n=0,GetScope().GamInputData.NidWorkItem!=""&&(n=GetScope().GamInputData.NidWorkItem),GetScope().GamInputData.ShowFicheDarAmad==!0)&&(GetScope().GamInputData.FishListDarAmad!=null&&(GetScope().GamInputData.FishListDarAmad[0].Income_Fiche!=undefined?GetScope().GamInputData.FishListDarAmad[0].Income_Fiche.PaymentBreakDate!=""&&GetScope().GamInputData.FishListDarAmad[0].Income_Fiche.PaymentBreakDate<GetCurrentDate()[0]&&(GetScope().BreakePaymentDaramad=!0,GetScope().$apply()):GetScope().GamInputData.FishListDarAmad[0].PaymentBreakDate!=""&&GetScope().GamInputData.FishListDarAmad[0].PaymentBreakDate<GetCurrentDate()[0]&&(GetScope().BreakePaymentDaramad=!0,GetScope().$apply()),GetScope().GamInputData.FishListDarAmad.length>0&&GetScope().GamInputData.FishListDarAmad[0].Result!=undefined&&GetScope().GamInputData.FishListDarAmad[0].Result.isTruePayment==!0)||FishFunc.BackFromBank==!1&&(GetScope().GamInputData.FishListDarAmad=null,(GetScope().GamInputData.CalculateDarAmad!=!0||GetScope().GamInputData.IsRequireBazdid==!0)&&GetScope().GamInputData.AlwaysCalculate!=!0?(t={pNidProc:GetScope().GamInputData.NidProc,pDistrict:GetScope().GamInputData.District,pNidWorkItem:n},i=JSON.stringify(t),GetScope().Prop.ErrorMessage=null,StartBusy("DivFichDaramad","درحال محاسبه فیش درآمد"),$.ajax({type:"POST",url:ServiceAddress+"GetIncomeFicheByCI_IncomeCalculation",data:i,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(n){if(GetScope().isBusy=!1,StopBusy("DivFichDaramad"),n.ErrorResult.BizErrors.length>0)$(n.ErrorResult.BizErrors).each(function(n,t){t.ErrorAction==0&&(GetScope().GamInputData.FicheRes.HasError=!0)}),GetScope().GamInputData.FicheRes.ErrorMessageDaramad=n.ErrorResult.BizErrors[0].ErrorTitel,GetScope().ErrorColorD="red";else if(n.IncomeFicheByCI_IncomeCalculation==null||n.IncomeFicheByCI_IncomeCalculation!=null&&n.IncomeFicheByCI_IncomeCalculation.length==0)GetScope().GamInputData.FicheRes.ErrorMessageDaramad="این کد نوسازی فاقد بدهی است";else{GetScope().GamInputData.FishListDarAmad=n.IncomeFicheByCI_IncomeCalculation;GetScope().GamInputData.FishListDarAmad[0].Income_Fiche.PaymentBreakDate!=""&&GetScope().GamInputData.FishListDarAmad[0].Income_Fiche.PaymentBreakDate<GetCurrentDate()[0]&&(GetScope().BreakePaymentDaramad=!0);n.Income!=null&&(GetScope().FishListDarAmadDetail=n.Income.Income_LogMethod);GetScope().$apply();var t=$("#Step6").height();$("#Step6").height(t+GetScope().GamInputData.FishListDarAmad.length*150)}GetScope().$apply();GamPlugin.SavelocalStorage(GetScope().Config.ScopeName,GetScope().GamInputData)},error:function(){StopBusy("DivFichDaramad");GetScope().GamInputData.FicheRes.HasError=!0}})):(t={pNidProc:GetScope().GamInputData.NidProc,pCode:GetScope().GamInputData.CurrentNosaziCode,pSecurity_RequestGuid:RequestGuid,pSecurity_EncryptCode:EncryptCode,pNidWorkItem:n},i=JSON.stringify(t),GetScope().Prop.ErrorMessage=null,StartBusy("DivFichDaramad","درحال محاسبه فیش درآمد"),$.ajax({type:"POST",url:ServiceAddress+"CreateIncomeRowAndCalcAndExport",data:i,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(n){var t;GetScope().isBusy=!1;StopBusy("DivFichDaramad");n.ErrorResult.BizErrors.length>0?($(n.ErrorResult.BizErrors).each(function(n,t){t.ErrorAction==0&&(GetScope().GamInputData.FicheRes.HasError=!0)}),GetScope().GamInputData.FicheRes.ErrorMessageDaramad=n.ErrorResult.BizErrors[0].ErrorTitel,GetScope().ErrorColorD="red"):n.Income.UGPIncomeFiche==null||n.Income.UGPIncomeFiche!=null&&n.Income.UGPIncomeFiche.length==0?(GetScope().GamInputData.FicheRes.ErrorMessageDaramad="این کد نوسازی فاقد بدهی است",t=$("#Step7").height(),GetScope().ErrorColorD="green",$("#Step7").height(t)):(GetScope().GamInputData.FishListDarAmad=n.Income.UGPIncomeFiche,GetScope().GamInputData.FishListDarAmadDetail=n.Income.Income_LogMethod,GetScope().$apply(),t=$("#Step7").height(),$("#Step7").height(t+GetScope().GamInputData.FishListDarAmad.length*50),GetScope().GamInputData.FishListDarAmad[0].PaymentBreakDate!=""&&GetScope().GamInputData.FishListDarAmad[0].PaymentBreakDate<GetCurrentDate()[0]&&(GetScope().BreakePaymentDaramad=!0),GetScope().GamInputData.FishListDarAmad[0].EumFicheStatus==3&&(GetScope().GamInputData.FishListDarAmad[0].Result={},GetScope().GamInputData.FishListDarAmad[0].Result.isTruePayment=!0));GetScope().$apply();GamPlugin.SavelocalStorage(GetScope().Config.ScopeName,GetScope().GamInputData)},error:function(n){var t=n;StopBusy("DivFichDaramad");GetScope().GamInputData.FicheRes.HasError=!0}}))))},o=function(){var n,r,t,i;(GetScope().GamInputData.FicheRes.ErrorMessageAvarezDaramad="",n=0,GetScope().GamInputData.NidWorkItem!=""&&(n=GetScope().GamInputData.NidWorkItem),GetScope().GamInputData.ShowFicheAvarezDarAmad==!0)&&(GetScope().GamInputData.FishListAvarezDarAmad!=null&&GetScope().GamInputData.FishListAvarezDarAmad!=undefined&&GetScope().GamInputData.FishListAvarezDarAmad.length>0&&(r=Enumerable.From(GetScope().GamInputData.FishListAvarezDarAmad).Where(function(n){return n.Result!=undefined&&n.Result.isTruePayment}).Count(),r==GetScope().GamInputData.FishListAvarezDarAmad.length)||FishFunc.BackFromBank==!1&&(GetScope().GamInputData.FishListAvarezDarAmad=null,GetScope().GamInputData.CalculateDarAmad!=!0||GetScope().GamInputData.IsRequireBazdid==!0?(t={pNidProc:GetScope().GamInputData.NidProc,pDistrict:GetScope().GamInputData.District,pNidWorkItem:n},i=JSON.stringify(t),GetScope().Prop.ErrorMessage=null,StartBusy("DivFichDaramad","درحال محاسبه فیش درآمد"),$.ajax({type:"POST",url:ServiceAddress+"GetIncomeFicheByCI_IncomeCalculation",data:i,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(n){if(GetScope().isBusy=!1,StopBusy("DivFichDaramad"),n.ErrorResult.BizErrors.length>0)$(n.ErrorResult.BizErrors).each(function(n,t){t.ErrorAction==0&&(GetScope().GamInputData.FicheRes.HasError=!0)}),GetScope().GamInputData.FicheRes.ErrorMessageAvarezDaramad=n.ErrorResult.BizErrors[0].ErrorTitel,GetScope().ErrorColorD="red";else if(n.IncomeFicheByCI_IncomeCalculation==null||n.IncomeFicheByCI_IncomeCalculation!=null&&n.IncomeFicheByCI_IncomeCalculation.length==0)GetScope().GamInputData.FicheRes.ErrorMessageAvarezDaramad="این کد نوسازی فاقد بدهی است";else{GetScope().GamInputData.FishListAvarezDarAmad=n.IncomeFicheByCI_IncomeCalculation;GetScope().GamInputData.FishListAvarezDarAmad[0].Income_Fiche.PaymentBreakDate!=""&&GetScope().GamInputData.FishListAvarezDarAmad[0].Income_Fiche.PaymentBreakDate<GetCurrentDate()[0]&&(GetScope().BreakePaymentAvarezDaramad=!0);n.Income!=null&&(GetScope().FishListAvarezDarAmadDetail=n.Income.Income_LogMethod);GetScope().$apply();var t=$("#Step6").height();$("#Step6").height(t+GetScope().GamInputData.FishListAvarezDarAmad.length*150)}GetScope().$apply();GamPlugin.SavelocalStorage(GetScope().Config.ScopeName,GetScope().GamInputData)},error:function(n){var t=n;StopBusy("DivFichDaramad");GetScope().GamInputData.FicheRes.HasError=!0}})):(t={pNidProc:GetScope().GamInputData.NidProc,pCode:GetScope().GamInputData.CurrentNosaziCode,pSecurity_RequestGuid:RequestGuid,pSecurity_EncryptCode:EncryptCode,pNidWorkItem:n},i=JSON.stringify(t),GetScope().Prop.ErrorMessage=null,StartBusy("DivFichDaramad","درحال محاسبه فیش درآمد"),$.ajax({type:"POST",url:ServiceAddress+"CreateIncomeRowAndCalcAndExport",data:i,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(n){var t;GetScope().isBusy=!1;StopBusy("DivFichDaramad");n.ErrorResult.BizErrors.length>0?($(n.ErrorResult.BizErrors).each(function(n,t){t.ErrorAction==0&&(GetScope().GamInputData.FicheRes.HasError=!0)}),GetScope().GamInputData.FicheRes.ErrorMessageAvarezDaramad=n.ErrorResult.BizErrors[0].ErrorTitel,GetScope().ErrorColorD="red"):n.Income.UGPIncomeFiche==null||n.Income.UGPIncomeFiche!=null&&n.Income.UGPIncomeFiche.length==0?(GetScope().GamInputData.FicheRes.ErrorMessageAvarezDaramad="این کد نوسازی فاقد بدهی است",t=$("#Step7").height(),GetScope().ErrorColorD="green",$("#Step7").height(t)):(GetScope().GamInputData.FishListAvarezDarAmad=n.Income.UGPIncomeFiche,GetScope().GamInputData.FishListAvarezDarAmadDetail=n.Income.Income_LogMethod,GetScope().$apply(),t=$("#Step7").height(),$("#Step7").height(t+GetScope().GamInputData.FishListAvarezDarAmad.length*50),GetScope().GamInputData.FishListAvarezDarAmad[0].Income_Fiche.PaymentBreakDate!=""&&GetScope().GamInputData.FishListAvarezDarAmad[0].Income_Fiche.PaymentBreakDate<GetCurrentDate()[0]&&(GetScope().BreakePaymentAvarezDaramad=!0));GetScope().$apply();GamPlugin.SavelocalStorage(GetScope().Config.ScopeName,GetScope().GamInputData)},error:function(n){var t=n;StopBusy("DivFichDaramad");GetScope().GamInputData.FicheRes.HasError=!0}}))))},s=function(i){i==undefined&&(i=5);t=!0;CheckIsDoneManagerConfirmAll(t=>{t==!0?(GetScope().GamInputData.IsDoneManagerConfirm=!0,n()):(GetScope().Prop.ErrorMessage=ConfirmManagerForAvarezMessage,GetScope().IsReadOnly=!0,$("#AllFiche").hide(),GetScope().GamInputData.IsDoneManagerConfirm=!1),GetScope().$apply()},"GridView1",i)},h=function(n){StartBusy("GrdPay");n.forEach(function(n){var t={pBillID:n.Duty_fiche!=undefined?n.Duty_fiche.BillID:n.BillID,pPaymentID:n.Duty_fiche!=undefined?n.Duty_fiche.PaymentID:n.PaymentID,pDistrict:GetScope().GamInputData.District},i=JSON.stringify(t);$.ajax({type:"POST",url:ServiceAddress+"GetFicheByBillAndPayID ",data:i,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(t){StopBusy("GrdPay");var i=t;i.FicheByBillAndPayID.Duty_fiche.EumDutyFicheStatus==1&&(n.Result==undefined&&(n.Result={}),n.Result.isTruePayment=!0,n.Result.BillID=i.FicheByBillAndPayID.Duty_fiche.BillID,n.Result.PaymentID=i.FicheByBillAndPayID.Duty_fiche.PaymentID,n.Result.SaleReferenceId=i.FicheByBillAndPayID.Duty_fiche.PaymentReferenceNo,n.Result.Price=i.FicheByBillAndPayID.Duty_fiche.TotalPrice)},error:function(n){var t=n}})})},c=function(n){StartBusy("GrdPay");n.forEach(function(n){var t={pBillID:n.Duty_fiche!=undefined?n.Duty_fiche.BillID:n.BillID,pPaymentID:n.Duty_fiche!=undefined?n.Duty_fiche.PaymentID:n.PaymentID,District:GetScope().GamInputData.District},i;n.Income_Fiche!=undefined&&(t={BillID:n.Income_Fiche!=undefined?n.Income_Fiche.BillID:n.BillID,PaymentID:n.Income_Fiche!=undefined?n.Income_Fiche.PaymentID:n.PaymentID,District:GetScope().GamInputData.District});i=JSON.stringify(t);$.ajax({type:"POST",url:ServiceAddress+"GetIncome_FicheByBillIDAndPayID ",data:i,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(t){var i,r;StopBusy("GrdPay");i=t;i.Income_FicheByBillIDAndPayID!=null&&(i.Income_FicheByBillIDAndPayID.EumFicheStatus==1?(n.Result==undefined&&(n.Result={}),n.Result.isTruePayment=!0,n.Result.BillID=i.Income_FicheByBillIDAndPayID.BillID,n.Result.PaymentID=i.Income_FicheByBillIDAndPayID.PaymentID,n.Result.SaleReferenceId=i.Income_FicheByBillIDAndPayID.PaymentReferenceNo,n.Result.Price=i.Income_FicheByBillIDAndPayID.TotalPrice):i.Income_FicheByBillIDAndPayID.EumFicheStatus==4&&(r=Enumerable.From(GetScope().GamInputData.FishListDarAmad).ToDictionary(),r.Remove(n),GetScope().GamInputData.FishListDarAmad=r.ToEnumerable().Select(n=>n.Key).ToArray()))},error:function(n){var t=n}})});GetScope().$apply()};this.PayFish=function(n,t,i,r,u,f,e,o,s){StartBusyTimer();f==undefined&&(f=GetScope().GamInputData.CurrentNosaziCode);var h=f.split("-")[0];u==undefined&&(u=GetScope().GamInputData.NidNosaziCode);GamPlugin.SavelocalStorage(GetScope().Config.ScopeName,GetScope().GamInputData);ShowPaymentUrl(n,t,i,r,u,h,e,o,s)};this.PrintFiche=function(n){var t=getParameterByName("FicheNo"),i="RptReconFiche&ReportParameter=NidFiche;"+n+",FicheNo;"+t+",District;"+GetScope().GamInputData.District;window.open(FactorUrl+i,"_blank")};this.PrintFicheDaramad=function(n){var t=getParameterByName("FicheNo"),i="RptIncomeFiche&ReportParameter=NidFiche;"+n+",FicheNo;"+t+",District;"+GetScope().GamInputData.District;window.open(FactorUrl+i,"_blank")};this.PrintFicheDetail=function(n){var t="RptShahrsaziIncomeFactor&ReportParameter=NidIncome;"+n+",District;"+GetScope().GamInputData.District;window.open(FactorUrl+t,"_blank")};this.CheckPayFish=function(){var n=!1,t=0,i=0,r=0,u=0,f=0;return GetScope().GamInputData.FishList!=undefined&&(t=Enumerable.From(GetScope().GamInputData.FishList).Where(function(n){return n.Result!=undefined&&n.Result.isTruePayment}).Count()),GetScope().GamInputData.FishListPasmand!=undefined&&(i=Enumerable.From(GetScope().GamInputData.FishListPasmand).Where(function(n){return n.Result!=undefined&&n.Result.isTruePayment}).Count()),GetScope().GamInputData.FishListDarAmad!=undefined&&(r=Enumerable.From(GetScope().GamInputData.FishListDarAmad).Where(function(n){return n.Result!=undefined&&n.Result.isTruePayment||n.EumFicheStatus==3}).Count()),GetScope().GamInputData.FishListAvarezDarAmad!=undefined&&(u=Enumerable.From(GetScope().GamInputData.FishListAvarezDarAmad).Where(function(n){return n.Result!=undefined&&n.Result.isTruePayment||n.EumFicheStatus==3}).Count()),GetScope().GamInputData.FishListSenfi!=undefined&&(f=Enumerable.From(GetScope().GamInputData.FishListSenfi).Where(function(n){return n.Result!=undefined&&n.Result.isTruePayment}).Count()),GetScope().GamInputData.FicheRes.HasError!=!0&&(GetScope().GamInputData.FishList==undefined||t==GetScope().GamInputData.FishList.length)&&(GetScope().GamInputData.FishListPasmand==undefined||i==GetScope().GamInputData.FishListPasmand.length)&&(GetScope().GamInputData.FishListSenfi==undefined||f==GetScope().GamInputData.FishListSenfi.length)&&(GetScope().GamInputData.FishListDarAmad==undefined||r==GetScope().GamInputData.FishListDarAmad.length)&&(GetScope().GamInputData.FishListAvarezDarAmad==undefined||u==GetScope().GamInputData.FishListAvarezDarAmad.length)&&(n=!0),n};this.GetCostKarshenasi=function(){StartBusy("GrdPay");var n={pCode:GetScope().GamInputData.CurrentNosaziCode},t=JSON.stringify(n);$.ajax({type:"POST",url:ServiceAddress+"CalculateJudgeCost",data:t,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(n){StopBusy("GrdPay");GetScope().isBusy=!1;n.ErrorResult.BizErrors.length>0?GetScope().Prop.ErrorMessage=n.ErrorResult.BizErrors[0].ErrorTitel:n.JudgeCost>0&&(GetScope().GamInputData.CostKarshenasi=n.JudgeCost,GetScope().$apply())},error:function(n){var t=n}})};this.GetPaymentInfo=function(n){var t=GetLocalStorage("ClsPaymentInfo-"+n);return t!=null&&t!="null"?JSON.parse(t):null};this.ClearPaymentInfo=function(n){ClearLocalStorage("ClsPaymentInfo-"+n)}},UploadPlugin;Array.prototype.remove=function(n){var t=this.indexOf(n);t!=-1&&this.splice(t,1)};UploadPlugin={NidTag:0,Domain:"1",BizCode:"",LoadObj:function(n){UploadPlugin.NidTag=n;this.Domain=GetScope().GamInputData.District;AppConfig.LoadObj(function(){GetScope().Prop.WorkFlowArchive==undefined&&UploadPlugin.GetBizCode()})},LoadObjNewNosazi:function(n){this.NidTag=n;this.Domain="UGP";this.BizCode=ClsAccount.AccountInfo.NidAccount;AppConfig.LoadObj(function(){Domain="UGP";UploadPlugin.GetWorkFlowArchive(ClsAccount.AccountInfo.NidAccount)})},dic:{},dicRequire:{},AddNidFile:function(n,t,i,r){if(n&&n!=null){r=="vakil"&&(GetScope().GamInputData.VakilUpload=!0);t&&r!="vakil"&&(UploadPlugin.dicRequire[i]=!0);UploadPlugin.dic[i]=!0;GetScope().GamInputData.UploadCount=Object.keys(UploadPlugin.dic).length;GetScope().GamInputData.UploadCountRequire=Object.keys(UploadPlugin.dicRequire).length;GetScope().$apply();GamPlugin.SavelocalStorage(GetScope().Config.ScopeName,GetScope().GamInputData);UploadPlugin.ShowArchive();i==undefined&&(i="00000000-0000-0000-0000-000000000000");var u={pFileKey:n,BizCode:UploadPlugin.BizCode,pDomain:UploadPlugin.Domain,pNidEntity:UploadPlugin.NidTag,pNidWorkFlowArchive:i},f=JSON.stringify(u);$.ajax({type:"POST",url:"UStepGam.aspx/AddNidFile",data:f,contentType:"application/json; charset=utf-8",dataType:"json"})}},GetBizCode:function(){var n={pNidNosaziCode:GetScope().GamInputData.NidNosaziCode,pCI_ArchiveGroup:CI_Archivegroup,pDistrict:GetScope().GamInputData.District},t=JSON.stringify(n);StartBusy1("در حال دریافت کد آرشیو");$request=$.ajax({type:"POST",url:ServiceAddress+"GetArchiveWrapper",data:t,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(n){if(StopBusy1(),n.ArchiveWrapper==null&&(n.ArchiveWrapper="test"),n.ArchiveWrapper!=null){var t=n.ArchiveWrapper.BizCode;UploadPlugin.BizCode=t;UploadPlugin.GetWorkFlowArchive(t)}},error:function(n){StopBusy1();var t=n;UploadPlugin.GetWorkFlowArchive(ClsAccount.AccountInfo.NidAccount)}})},GetBizCodeCallback:function(n){var t={pNidNosaziCode:GetScope().GamInputData.NidNosaziCode,pCI_ArchiveGroup:CI_Archivegroup,pDistrict:GetScope().GamInputData.District},i=JSON.stringify(t);StartBusy1("در حال دریافت کد آرشیو");$request=$.ajax({type:"POST",url:ServiceAddress+"GetArchiveWrapper",data:i,crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(t){if(StopBusy1(),t.ArchiveWrapper==null&&(t.ArchiveWrapper="test"),t.ArchiveWrapper!=null){var i=t.ArchiveWrapper.BizCode;UploadPlugin.BizCode=i;UploadPlugin.Domain=GetScope().GamInputData.District;n(i)}},error:function(){StopBusy1()}})},LoadArchiveWithDbData:function(n){$("#divUploader").empty();var t=GetScope().Prop.WorkFlowArchive;$.each(t,function(t,i){var u=$("#divUploader").AsSafaArchiveUploder(),r;t==0&&(u.ResetCount(),GetScope().GamInputData.MustUploadCount=0);r=i.ArchiveCount>0;r&&GetScope().GamInputData.MustUploadCount++;(typeof LoadLastUploadedFile=="undefined"||LoadLastUploadedFile==!0)&&(i.NidFile>0&&(UploadPlugin.dic[i.WorkFlowArchive1]=!0),i.NidFile>0&&r&&(UploadPlugin.dicRequire[i.WorkFlowArchive1]=!0));u.LoadObj(n,UploadPlugin.Domain,{UserName:ClsAccount.AccountInfo.FullName,UserCode:ClsAccount.AccountInfo.NidAccount,OtherFiled:i.Comment,Multiply:!0,NidTag:UploadPlugin.NidTag,SaveOrginalFile:typeof SaveOrginalFile!="undefined"?SaveOrginalFile:!0,DetectObject:!1,MinFileSize:Upload_MinFileSize,MaxFileSize:Upload_MaxFileSize,Title:i.ArchiveTitle,IsRequire:r,LoadNidFile:typeof LoadLastUploadedFile!="undefined"&&LoadLastUploadedFile==!1?0:i.NidFile,FilterExtensions:typeof FileExt!="undefined"?FileExt:".png,.jpg",OnCompleteUpload:function(n){UploadPlugin.AddNidFile(n.NidFile,r,i.WorkFlowArchive1,n.OtherFiled)}})});GetScope().GamInputData.UploadCount=Object.keys(UploadPlugin.dic).length;GetScope().GamInputData.UploadCountRequire=Object.keys(UploadPlugin.dicRequire).length;GetScope().$apply();UploadPlugin.ShowArchive()},GetWorkFlowArchive:function(n){StartBusy1("در حال بارگذاری اطلاعات");var t={pNidWorkflowDeff:GetScope().GamInputData.SelectedWorkFlow.NidWorkflowDeff,pNidAccount:ClsAccount.AccountInfo.NidAccount,pBizCode:n},i=JSON.stringify(t);$.ajax({type:"POST",data:i,url:"FrmParvaneh.aspx/GetWorkFlowArchive",crossDomin:!0,contentType:"application/json; charset=utf-8",dataType:"json",processdata:!0,success:function(t){StopBusy1();GetScope().Prop.WorkFlowArchive=typeof UploadConfig!="undefined"?UploadConfig:t.d;GetScope().GamInputData.ArchiveBizCode=n;UploadPlugin.LoadArchiveWithDbData(n)},error:function(){StopBusy1()}})},AddLegend:function(n,t,i){var r="",u;i==!0&&(t=t+" *",r=" Require");u=$("[id^=SafaArchive_Container]")[n];$(u).wrapAll("<fieldset><legend class='Uploader"+r+"'>"+t+"<\/legend><\/fieldset>")},ShowArchive:function(){if(ShowOldArchive!=!1){$("#DaneshDiVMain").show();var n=$("#Danesh").AsSafaArchive();n.LoadObj(GetScope().GamInputData.ArchiveBizCode,UploadPlugin.Domain,1,{backgroundColor:"rgb(170, 219, 170)",FullpageBgColor:"rgb(170, 219, 170)",thumbnailGutterHeight:10,thumbnailGutterWidth:5,Archive_NidEntity:UploadPlugin.NidTag,colorScheme:{navigationbar:{background:"yellow",border:"1px dotted #00cc00",color:"black",colorHover:"#fff"},thumbnail:{background:"rgb(180, 230, 190)",border:"1px solid yellow",labelBackground:"rgba(242, 242, 219, 0.33);",titleColor:"darkgreen",descriptionColor:"#ccc",descriptionShadow:"",paginationDotBorder:"2px solid #0c0",paginationDotBack:"#008500",paginationDotSelBack:"#0c0"}}})}},CheckArchiveValidity:function(){return GetScope().GamInputData.UploadCountRequire>=GetScope().GamInputData.MustUploadCount?GetScope().GamInputData.IsVakil==!0?GetScope().GamInputData.VakilUpload!=!0?(GetScope().Prop.ErrorMessage="کاربر گرامی ، تصویر وکالت نامه را بارگذاری نمایید",!1):!0:!0:(GetScope().Prop.ErrorMessage="کاربر گرامی ، مدارک لازم را بارگذاری نمایید",!1)}};const SKey="SafaUGPMenu12345";